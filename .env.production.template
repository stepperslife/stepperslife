###############################################################################
# SteppersLife Events - Production Environment Variables
###############################################################################
#
# INSTRUCTIONS:
# 1. Copy this file to .env.production
# 2. Fill in all the values with your actual production credentials
# 3. NEVER commit .env.production to version control
# 4. Keep this file secure - it contains sensitive information
#
# Usage:
#   cp .env.production.template .env.production
#   nano .env.production  # Edit with your production values
#
###############################################################################

# ===================================
# Application Environment
# ===================================
NODE_ENV=production
PORT=3000

# ===================================
# Application URLs
# ===================================
NEXT_PUBLIC_APP_URL=https://stepperslife.com/events
NEXTAUTH_URL=https://stepperslife.com/events
NEXT_PUBLIC_APP_DOMAIN=stepperslife.com

# ===================================
# Authentication & Security
# ===================================
# CRITICAL: Generate secure random strings for production
# Use: openssl rand -base64 32

NEXTAUTH_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_32_CHARS_MIN
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_32_CHARS_MIN
AUTH_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_32_CHARS_MIN

# ===================================
# Convex Database (Production)
# ===================================
# Get from: https://dashboard.convex.dev/
# Production deployment: neighborly-swordfish-681

CONVEX_URL=https://neighborly-swordfish-681.convex.cloud
NEXT_PUBLIC_CONVEX_URL=https://neighborly-swordfish-681.convex.cloud
CONVEX_DEPLOYMENT=prod:neighborly-swordfish-681

# ===================================
# Square Payment Processor
# ===================================
# Get from: https://developer.squareup.com/
# IMPORTANT: Use PRODUCTION credentials, not sandbox

SQUARE_ACCESS_TOKEN=REPLACE_WITH_SQUARE_PRODUCTION_ACCESS_TOKEN
SQUARE_APPLICATION_ID=REPLACE_WITH_SQUARE_PRODUCTION_APP_ID
SQUARE_LOCATION_ID=REPLACE_WITH_SQUARE_PRODUCTION_LOCATION_ID
SQUARE_WEBHOOK_SIGNATURE_KEY=REPLACE_WITH_SQUARE_WEBHOOK_SIGNATURE_KEY

# Public Square credentials (used in frontend)
NEXT_PUBLIC_SQUARE_APPLICATION_ID=REPLACE_WITH_SQUARE_PRODUCTION_APP_ID
NEXT_PUBLIC_SQUARE_LOCATION_ID=REPLACE_WITH_SQUARE_PRODUCTION_LOCATION_ID
NEXT_PUBLIC_SQUARE_ENVIRONMENT=production

# ===================================
# Stripe Payment Processor
# ===================================
# Get from: https://dashboard.stripe.com/apikeys
# IMPORTANT: Use LIVE keys (starts with sk_live_ and pk_live_)

STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_STRIPE_SECRET_KEY
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_YOUR_STRIPE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_STRIPE_WEBHOOK_SECRET

# ===================================
# PayPal Payment Processor
# ===================================
# Get from: https://developer.paypal.com/
# IMPORTANT: Use LIVE credentials, not sandbox

PAYPAL_CLIENT_ID=REPLACE_WITH_PAYPAL_PRODUCTION_CLIENT_ID
PAYPAL_SECRET_KEY=REPLACE_WITH_PAYPAL_PRODUCTION_SECRET_KEY
PAYPAL_WEBHOOK_ID=REPLACE_WITH_PAYPAL_WEBHOOK_ID
NEXT_PUBLIC_PAYPAL_CLIENT_ID=REPLACE_WITH_PAYPAL_PRODUCTION_CLIENT_ID

# ===================================
# Google OAuth (Social Login)
# ===================================
# Get from: https://console.cloud.google.com/apis/credentials
# IMPORTANT: Configure authorized redirect URIs:
#   - https://stepperslife.com/events/api/auth/callback/google

AUTH_GOOGLE_CLIENT_ID=REPLACE_WITH_GOOGLE_CLIENT_ID
AUTH_GOOGLE_CLIENT_SECRET=REPLACE_WITH_GOOGLE_CLIENT_SECRET

# ===================================
# Resend Email Service
# ===================================
# Get from: https://resend.com/api-keys
# Used for transactional emails (tickets, receipts, notifications)

RESEND_API_KEY=re_REPLACE_WITH_YOUR_RESEND_API_KEY

# ===================================
# Gemini AI (Optional)
# ===================================
# Get from: https://makersuite.google.com/app/apikey
# Used for AI-powered features (event descriptions, recommendations)

GEMINI_API_KEY=REPLACE_WITH_GEMINI_API_KEY

# ===================================
# Google Maps API (Optional)
# ===================================
# Get from: https://console.cloud.google.com/apis/credentials
# Used for location services and maps

GOOGLE_MAPS_API_KEY=REPLACE_WITH_GOOGLE_MAPS_API_KEY

# ===================================
# File Storage Configuration
# ===================================
# Path where uploaded product images are stored
# Docker volume maps this to /app/STEPFILES in container

PRODUCT_IMAGE_STORAGE_PATH=/app/STEPFILES/product-images

###############################################################################
# STORE SYSTEM - Additional Configuration
###############################################################################

# ===================================
# PostgreSQL Database (Store System)
# ===================================
# Used by the Store system for vendor marketplace data
# Generate password: openssl rand -base64 32

POSTGRES_DB=stepperslife_stores
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_WITH_SECURE_POSTGRES_PASSWORD

# Prisma database URL (used by Store system)
DATABASE_URL=postgresql://postgres:REPLACE_WITH_SECURE_POSTGRES_PASSWORD@postgres:5432/stepperslife_stores?schema=public

# ===================================
# Redis Cache (Store System)
# ===================================
# Used for session storage and caching
# Generate password: openssl rand -base64 32

REDIS_PASSWORD=REPLACE_WITH_SECURE_REDIS_PASSWORD

# ===================================
# MinIO Object Storage (Store System)
# ===================================
# Used for vendor product images and store assets
# Generate password: openssl rand -base64 32

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=REPLACE_WITH_SECURE_MINIO_PASSWORD
MINIO_DOMAIN=storage.stepperslife.com

# ===================================
# Store-Specific Webhooks
# ===================================
# Separate webhook secrets for store payment processing

STRIPE_WEBHOOK_SECRET_STORES=whsec_REPLACE_WITH_STORE_STRIPE_WEBHOOK_SECRET

###############################################################################
# PRODUCTION CHECKLIST
###############################################################################
#
# Before deploying to production, verify:
#
# ✅ 1. All REPLACE_WITH_* placeholders are filled in
# ✅ 2. All secrets are strong random strings (32+ characters)
# ✅ 3. All payment processors are using PRODUCTION credentials (not test/sandbox)
# ✅ 4. Google OAuth redirect URIs include production domain
# ✅ 5. Convex deployment is set to production (neighborly-swordfish-681)
# ✅ 6. NEXTAUTH_URL and NEXT_PUBLIC_APP_URL use HTTPS
# ✅ 7. File permissions are restrictive (chmod 600 .env.production)
# ✅ 8. This file is NOT committed to Git (in .gitignore)
# ✅ 9. PostgreSQL, Redis, MinIO passwords are secure (32+ chars)
# ✅ 10. Store system DATABASE_URL matches POSTGRES_PASSWORD
#
# Security Commands:
#   chmod 600 .env.production              # Restrict file permissions
#   openssl rand -base64 32                # Generate secure random string
#   grep -r "REPLACE_WITH" .env.production # Check for unfilled placeholders
#
###############################################################################

###############################################################################
# WEBHOOK CONFIGURATION
###############################################################################
#
# Configure webhooks in your payment processor dashboards:
#
# Square Webhooks:
#   URL: https://stepperslife.com/events/api/webhooks/square
#   Events: payment.created, payment.updated, refund.created
#
# Stripe Webhooks:
#   URL: https://stepperslife.com/events/api/webhooks/stripe
#   Events: payment_intent.succeeded, charge.refunded
#
# PayPal Webhooks:
#   URL: https://stepperslife.com/events/api/webhooks/paypal
#   Events: PAYMENT.CAPTURE.COMPLETED, PAYMENT.CAPTURE.REFUNDED
#
# ===================================
# STORE SYSTEM WEBHOOKS
# ===================================
#
# Stripe Webhooks (Store):
#   URL: https://stepperslife.com/store/api/webhooks/stripe
#   Events: payment_intent.succeeded, charge.refunded, account.updated
#
# Square Webhooks (Store):
#   URL: https://stepperslife.com/store/api/webhooks/square
#   Events: payment.created, payment.updated, refund.created
#
###############################################################################

###############################################################################
# DEPLOYMENT COMMANDS
###############################################################################
#
# 1. Create required directories on VPS:
#    mkdir -p /root/stepperslife/data/{stepfiles,postgres,redis,minio,store-uploads,ssl}
#    mkdir -p /root/stepperslife/logs/{app,app-standby,app-stores,app-stores-standby,nginx}
#
# 2. Set permissions:
#    chmod 700 /root/stepperslife/data/postgres
#    chmod 700 /root/stepperslife/data/redis
#    chmod 755 /root/stepperslife/data/minio
#
# 3. Deploy infrastructure containers:
#    docker-compose -f docker-compose.blue-green.yml up -d postgres redis minio
#
# 4. Wait for databases to be ready (check health):
#    docker-compose -f docker-compose.blue-green.yml ps
#
# 5. Run Prisma migrations (Store system):
#    docker-compose -f docker-compose.blue-green.yml run --rm stepperslife-stores npx prisma migrate deploy
#
# 6. Seed initial data (optional):
#    docker-compose -f docker-compose.blue-green.yml run --rm stepperslife-stores npx prisma db seed
#
# 7. Deploy applications:
#    docker-compose -f docker-compose.blue-green.yml up -d stepperslife stepperslife-stores
#
# 8. Deploy nginx:
#    docker-compose -f docker-compose.blue-green.yml up -d nginx certbot
#
# 9. Verify health checks:
#    curl https://stepperslife.com/events/api/health
#    curl https://stepperslife.com/store/api/health
#
###############################################################################
