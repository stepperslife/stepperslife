# ============================================================================
# SteppersLife VPS Environment Configuration
# ============================================================================
#
# This file contains ALL environment variables needed for BOTH:
# - Events Module (Convex-based)
# - Store Module (PostgreSQL/Redis/MinIO-based)
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env on your VPS at /root/stepperslife/.env
# 2. Fill in all required values (marked with "REQUIRED")
# 3. Keep secure values secret (never commit to git)
#
# ============================================================================

# ============================================================================
# GLOBAL CONFIGURATION
# ============================================================================

NODE_ENV=production

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# NextAuth Secret (REQUIRED - Generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=

# JWT Secret (REQUIRED - Generate with: openssl rand -base64 32)
JWT_SECRET=

# Auth Secret (REQUIRED - Can be same as NEXTAUTH_SECRET)
AUTH_SECRET=

# ============================================================================
# EVENTS MODULE - CONVEX DATABASE
# ============================================================================

# Convex URLs (REQUIRED)
CONVEX_URL=https://neighborly-swordfish-681.convex.cloud
NEXT_PUBLIC_CONVEX_URL=https://neighborly-swordfish-681.convex.cloud
CONVEX_DEPLOYMENT=prod:neighborly-swordfish-681

# ============================================================================
# STORE MODULE - POSTGRESQL DATABASE
# ============================================================================

# PostgreSQL Configuration (REQUIRED)
POSTGRES_DB=stepperslife_stores
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# Database URL (auto-generated from above)
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@postgres:5432/stepperslife_stores?schema=public

# ============================================================================
# STORE MODULE - REDIS CACHE
# ============================================================================

# Redis Password (REQUIRED - Generate with: openssl rand -base64 32)
REDIS_PASSWORD=

# Redis URL (auto-generated)
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# ============================================================================
# STORE MODULE - MINIO OBJECT STORAGE
# ============================================================================

# MinIO Configuration (REQUIRED)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=
MINIO_DOMAIN=storage.stepperslife.com
MINIO_BUCKET=stepperslife-stores

# MinIO Connection (for application)
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=${MINIO_ROOT_PASSWORD}
MINIO_USE_SSL=false
MINIO_PUBLIC_ENDPOINT=https://storage.stepperslife.com

# ============================================================================
# PAYMENT PROCESSING - STRIPE
# ============================================================================

# Stripe Keys (REQUIRED)
STRIPE_SECRET_KEY=sk_live_
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_

# Stripe Webhooks (REQUIRED)
STRIPE_WEBHOOK_SECRET=whsec_
STRIPE_WEBHOOK_SECRET_STORES=whsec_

# ============================================================================
# PAYMENT PROCESSING - SQUARE
# ============================================================================

# Square Configuration (REQUIRED)
SQUARE_ACCESS_TOKEN=
SQUARE_APPLICATION_ID=
SQUARE_LOCATION_ID=
SQUARE_WEBHOOK_SIGNATURE_KEY=

# Square Public Keys
NEXT_PUBLIC_SQUARE_APPLICATION_ID=${SQUARE_APPLICATION_ID}
NEXT_PUBLIC_SQUARE_LOCATION_ID=${SQUARE_LOCATION_ID}
NEXT_PUBLIC_SQUARE_ENVIRONMENT=production

# ============================================================================
# PAYMENT PROCESSING - PAYPAL
# ============================================================================

# PayPal Configuration (REQUIRED)
PAYPAL_CLIENT_ID=
PAYPAL_SECRET_KEY=
PAYPAL_WEBHOOK_ID=

# PayPal Public
NEXT_PUBLIC_PAYPAL_CLIENT_ID=${PAYPAL_CLIENT_ID}

# ============================================================================
# OAUTH / SOCIAL LOGIN - GOOGLE
# ============================================================================

# Google OAuth (REQUIRED for social login)
AUTH_GOOGLE_CLIENT_ID=
AUTH_GOOGLE_CLIENT_SECRET=

# Alternate names (for compatibility)
GOOGLE_CLIENT_ID=${AUTH_GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${AUTH_GOOGLE_CLIENT_SECRET}

# ============================================================================
# EMAIL SERVICE - RESEND
# ============================================================================

# Resend API Key (REQUIRED for transactional emails)
RESEND_API_KEY=re_

# Email Configuration
EMAIL_FROM="SteppersLife <noreply@stepperslife.com>"
EMAIL_FROM_STORES="SteppersLife Stores <stores@stepperslife.com>"

# ============================================================================
# AI / EXTERNAL APIS
# ============================================================================

# Google Gemini AI (Optional)
GEMINI_API_KEY=

# Google Maps API (Optional - for location features)
GOOGLE_MAPS_API_KEY=

# ============================================================================
# APPLICATION URLS
# ============================================================================

# Events Module URLs
NEXTAUTH_URL=https://stepperslife.com/events
NEXT_PUBLIC_APP_URL=https://stepperslife.com/events
NEXT_PUBLIC_APP_DOMAIN=stepperslife.com

# ============================================================================
# STORAGE & FILE PATHS
# ============================================================================

# Events Module - Product Images
PRODUCT_IMAGE_STORAGE_PATH=/app/STEPFILES/product-images

# ============================================================================
# MONITORING & LOGGING (Optional)
# ============================================================================

# Log Level
LOG_LEVEL=info

# Sentry (Optional - for error tracking)
# SENTRY_DSN=
# NEXT_PUBLIC_SENTRY_DSN=

# Analytics (Optional)
# NEXT_PUBLIC_GA_MEASUREMENT_ID=
# NEXT_PUBLIC_PLAUSIBLE_DOMAIN=

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================

# Enable/Disable Features
FEATURE_SOCIAL_LOGIN=true
FEATURE_PAYPAL=true
FEATURE_SQUARE=true
FEATURE_STRIPE=true

# ============================================================================
# RATE LIMITING (Optional)
# ============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================================================
# SESSION CONFIGURATION (Optional)
# ============================================================================

SESSION_MAX_AGE=2592000
SESSION_UPDATE_AGE=86400

# ============================================================================
# CORS CONFIGURATION (Optional)
# ============================================================================

ALLOWED_ORIGINS=https://stepperslife.com,https://events.stepperslife.com,https://www.stepperslife.com

# ============================================================================
# DATABASE BACKUP (Optional)
# ============================================================================

# Backup Configuration
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=7

# ============================================================================
# NOTES
# ============================================================================
#
# Required Secrets Generation Commands:
#
# NEXTAUTH_SECRET:    openssl rand -base64 32
# JWT_SECRET:         openssl rand -base64 32
# AUTH_SECRET:        openssl rand -base64 32
# POSTGRES_PASSWORD:  openssl rand -base64 32
# REDIS_PASSWORD:     openssl rand -base64 32
# MINIO_ROOT_PASSWORD: openssl rand -base64 32
#
# Get your API keys from:
# - Stripe: https://dashboard.stripe.com/apikeys
# - Square: https://developer.squareup.com/apps
# - PayPal: https://developer.paypal.com/dashboard/applications
# - Google OAuth: https://console.cloud.google.com/apis/credentials
# - Resend: https://resend.com/api-keys
# - Convex: https://dashboard.convex.dev
#
# ============================================================================
